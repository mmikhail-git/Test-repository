.. _docker:

Cмарт-контракты Docker
=======================================

В дополнении к контрактам, реализованным на базе :ref:`скриптов RIDE <ride>` для смарт-аккаунтов и смарт-ассетов, платформа Восток предоставляет возможность разработки и использования Тьюринг-полных смарт-контрактов.
Для реализации Тьюринг-полных контрактов выбран подход, в котором программы запускаются в изолированной среде докер-контейнера. При этом разработка приложений может выполняться без ограничений на используемый язык программирования.  Доступ к состоянию выполняется через API ноды. Для хранения смарт-контрактов используется локальный докер-репозиторий (Docker Registry) с доступом для деплоя и чтения для машин с нодами.

.. image:: ../img/docker-1.png
    :scale: 80%
    :align: right

Создание смарт-контракта
--------------------------

Установка смарт-контракта в блокчейн реализуется через публикацию специальной транзакции, содержащей ссылку на docker образ локального репозитории докера. В этом процессе docker образ проверяется и запускается. Образ после загрузки запускается в виде docker контейнера с приложением на каждой ноде.

Исполнение смарт-контракта
-----------------------------

Исполнение смарт-контрактов инициируется специальной транзакцией, в которой содержатся идентификатор контракта и параметры для его вызова.

Смарт-контракты изменяют своё состояние через обновление пар ключ - значение (как и data transfer транзакции).

.. hint:: Приложение, запускаемое в докер-контейнере может быть написано на любом языке. Так как докер контейнер не может включать самого приложение, а содержит лишь описание запуска контейнера, то доступ к приложению (или его исходникам для сборки) гарантируется инфраструктурой (сборкой docker образ и публикация в репозиторий). Каждое приложение запускается в докер-контейнере для возможности изоляции и управления ресурсами, доступными конкретному приложению. 

Примеры реализации
-----------------------------

:ref:`Создание простого контракта <first-contract-tutorial>`
